---
id: aa69d060
title: "LSP: No AbortSignal propagation to LSP requests"
tags: [minor, lsp]
status: done
created_at: "2026-02-18T19:13:46.355Z"
---

**Done.** Added `signal?: AbortSignal` propagation through the full LSP call chain:

1. **`client.ts`**: `request()` now accepts optional `signal`. If already aborted, rejects immediately. Otherwise listens for `abort` event to cancel pending requests (removes from pending map, clears timeout, rejects with "Cancelled"). All public methods (`hover`, `definition`, `references`, `documentSymbol`, `workspaceSymbol`) now accept and forward `signal`.

2. **`index.ts`**: `resolvePosition()` and `resolveSymbol()` accept optional `signal` and forward it to LSP calls. The `execute` handler threads the `signal` parameter through all code paths (hover, definition, references, symbols, workspace_symbols).

When a request is cancelled via signal, the pending entry is removed so any late server response is silently ignored.
