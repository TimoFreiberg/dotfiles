---
id: e394d712
title: "[P1] LSP client: clear request timeout timer on success"
tags: [lsp, p1, bug]
status: done
created_at: "2026-02-15T21:59:47.154Z"
---

**File:** `agents/extensions/lsp/client.ts:172-177`

Each call to `request()` creates a 30s `setTimeout` that is never cancelled when the response arrives. The pending-map check makes it a no-op functionally, but the timer and its closure (holding `reject`, the Promise internals, and `this`) stay alive for the full 30 seconds. Over a session with hundreds of LSP queries this accumulates meaningful garbage.

**Fix:** Store the timer ID and `clearTimeout` it in the resolve/reject path at lines 218-224.
