---
id: 69476c84
title: "LSP: Strip `@` prefix from `params.file` in tool execute"
tags: [bug, lsp]
status: done
created_at: "2026-02-18T19:12:53.829Z"
---

**Bug** â€” The pi docs say: "If your custom tool accepts a path, normalize a leading @ as well."

The `tool_result` handler (line 421) correctly strips `@`, but `resolvePosition` and the `symbols` branch in `execute` do not. If the LLM passes `@src/main.rs`, path resolution will fail.

**Fix:** In `resolvePosition` and the `symbols` action in `index.ts`:
```typescript
const filePath = resolve(projectRoot, params.file.replace(/^@/, ""));
```
